Suppose $\cat{C}$ is a category and $(\cat{E},\otimes,I)$ is a strict
monoidal category.

\begin{definition}[Graded $\func{F}$-Algebra]
    For a functor $\func{F} : \cat{E} \times \cat{C} \mto \cat{C}$, a
    graded $\func{F}$-algebra is a pair $(\func{A},h)$ that consists
    of a functor $\func{A} : \cat{E} \mto \cat{C}$ and a family $h$ of
    morphisms:
    \[ 
        h_{m,n} : \func{F}(m,\func{A}(n)) \mto \func{A}(m \otimes n)
    \]
    A \emph{homomorphism} between two graded $\func{F}$-algebras
    $(\func{A},h)$ and $(\func{B},h')$ consists of a morphism
    \[
        \alpha : (\func{A},h) \mto (\func{B},h')
    \]
    is defined as a natural transformation $\alpha : \func{A}_1 \mto
    \func{A}_2$ such that:
    \[
        \func{F(m,\alpha_n)} ; h'_{m,n} = h_{m,n} ; \alpha_{m \otimes n}
    \]
\end{definition}

\begin{definition}
    If the category of graded $\func{F}$-algebras has an initial object, then
    we call this a \emph{graded initial} $\func{F}$-algebra denoted
    by $(\mu\func{F}, \mathsf{in})$.  That is, for any other
    $\func{F}$-algebra $(\func{A},h)$ there must be a unique morphism 
    $\alpha : (\mu\func{F}, \mathsf{in}) \mto (\func{A},h)$, but this
    implies that for any object $n$, $\alpha_n : \mu\func{F}(n) \mto
    \func{A}(n)$ is unique and $\mu\func{F}(n)$ is an initial object
    in $\cat{C}$.
\end{definition}

\begin{lemma}[From Structures to Homomorphisms]
\label{lemma:from_structures_to_homomorphisms}
Given any graded $\func{F}$-algebra $(\func{A},h)$, the structure map
$h$ is also a homomorphism between $\func{F}$-algebras
$(\func{F}(m,A(-)),\func{F}(-,h_{m,-}))$ and $(\func{A}(m \otimes -)),h_{-, m \otimes -})$.
\end{lemma}
\begin{proof}
This proof holds trivially by writing out the commutative square for
the $\func{F}$-algebra homomorphism.
\end{proof}

\begin{lemma}[Graded Lambek's Lemma]
\label{lemma:graded_lambeks_lemma}
If $(\func{A},h)$ is a graded initial algebra of $\func{F}$, 
then for any object $m$, 
$\func{A}(m \otimes -) : \cat{E} \mto \cat{C}$ is isomorphic to 
$\func{F}(m, A(-)) : \cat{E} \mto \cat{C}$ via $h_m$.
\end{lemma}
\begin{proof}
Suppose $h_{m,n} : \func{F}(m,A(n)) \mto \func{A}(m \otimes n)$ is an initial
algebra structure for any $m$ and $n$.  
Now define an algebra structure:
\[
\func{F}(m',h_{m,n}) : \func{F}(m',\func{F}(m,A(n))) \mto \func{F}(m',\func{A}(m \otimes n))
\]
Then by initiality there exists an $\func{F}$-algebra homomorphism 
$$i_{m} : \func{A}(m \otimes -) \mto \func{F}(m,\func{A}(-))$$ such that:
$$\func{F(m',i_{m,n})} ; \func{F}(m',h_{m,n}) = h_{m',(m \otimes n)} ;
i_{m',(m \otimes n)}$$
We also know that $h_{m} : \func{F}(m,A(-)) \mto \func{A}(m \otimes -)$ is
itself a graded $\func{F}$-algebra homomorphism
(Lemma~\ref{lemma:from_structures_to_homomorphisms}). Thus, since we
know that $\func{A}(m \otimes n)$ is an initial object by definition and
assumption that $\func{A}$ is a graded initial object, and hence, 
$i_{m,n}; h_{m,n} = \id_{m \otimes n}$.  

Next we know that $i$ is a graded $\func{F}$-algebra homomorphism which
implies $$\func{F}(m,i_{n,I});\func{F}(m,h_{n,I}) =
h_{m,n};i_{m,n}$$ but again by initiality we know that
$$\func{F}(m,i_{n,I});\func{F}(m,h_{n,I}) =
\id_{\func{F}(m,\func{A}(n))}$$
Therefore, $i$ is the inverse of $h$ and we obtain our result.
\end{proof}

\begin{definition}[Graded Folds]
\label{def:graded_folds}
Suppose $(\mu\func{F},\mathsf{in})$ is a graded initial
$\func{F}$-algebra. Then the unquie map between $\mu\func{F}$ and any
other graded $\func{F}$-algebra $(\func{A},h)$ is the \emph{fold} for
$\mu\func{F}$ and is denoted by 
\[
    \mathsf{fold}(h) : \mu\func{F} \mto \func{A}
\]  
Furthermore, we know that the following must hold:
\[
\mathsf{in}_{m,n};\mathsf{fold}(h)_{m * n} = \func{F}(m,\mathsf{fold}(h)_n);h
\]
\end{definition}

\begin{definition}[Graded Forgetful Limits]
\label{def:forgetful_limits}
There is a forgetful functor from the category of graded
$\func{F}$-algebras and the functor category $[\cat{E},\cat{C}]$ and
their natural transformations. This functor is defined as follows:
\[
    \begin{array}{lll}
        \func{U}_\func{F}(\func{A},h) = \func{A}\\
        \func{U}_\func{F}(\alpha) = \alpha
    \end{array}
\]
Given an object of $[\cat{E},\cat{C}]$, say $\func{X}$, then a
\emph{$\func{U}_\func{F}$-cone for $X$} comprises, for every graded
$\func{F}$-albebra $(\func{A},h)$, a natural transformation 
$v_{(\func{A},h)} : \func{X} \mto \func{A}$ in $[\cat{E},\cat{C}]$
such that, for every graded $\func{F}$-algebra homomorphism $\alpha :
\func{A} \mto \func{B}$, we have $v_{(\func{B},g)} = \alpha;v_{(\func{A},h)}
$.  We denote these cones by $(\func{X},v)$ and call $\func{X}$ its
\emph{vertex} and $v_{(A,h)}$ the \emph{projection} from $\func{X}$ to
$\func{A}$. 

A \emph{$\func{U}_\func{F}$-cone morphism} $g : (\func{X},v_1) \mto
(\func{Y},v_2)$ is a natural transformation $g : \func{X} \mto
\func{Y}$ such that for any graded $\func{F}$-algebra $(A,h)$, we have
$g;v_2 = v_1$. A \emph{$\func{U}_\func{F}$-limit} is a
$\func{U}_\func{F}$-cone to which there is a unique
$\func{U}_\func{F}$-cone morphism, call the \emph{mediating morphism},
from any other $\func{U}_\func{F}$-cone.
\end{definition}

\newcommand{\UFunc}[1]{\func{U}_{\func{#1}}}
\newcommand{\UCone}[1]{$\UFunc{#1}$-cone}
\newcommand{\ULimit}[1]{$\UFunc{#1}$-limit}

\begin{lemma}[Forgetful Limits are Unique]
\label{lemma:forgetful_limits_are_unique}
If $(\func{X},v)$ is a $\func{U}_{\func{F}}$-limit, then it is unique
up to isomorphism.
\end{lemma}
\begin{proof}
Suppose $(\func{Y},v')$ is another \ULimit{F}. Thus, there is a unique
\UCone{F} morphism $i : \func{Y} \mto \func{X}$ such that $i;v = v'$.
But, there must also be a unique \UCone{F} morphism $j : \func{X} \mto
\func{Y}$ such that $j;v' = v$.  But, by substitution $i;j;v' = v'$
and $j;i;v = v$, but these in addition to the assumption that both $i$
and $j$ are unique imply that $i;j = \id_\func{Y}$ and $j;i =
\id_\func{X}$, and thus $i$ and $j$ are inverses of each other. 
\end{proof}

\subsection{Interpretation}
\label{subsec:interpretation}
\emph{The Non-graded Case.} We begin this section with an overview of
the interpretation of non-graded GADTs.  Then show how to move to the
graded case. The basic form of a GADT is the following:
\begin{verbatim}
data G f h a where
    GCon :: f (G f h) a -> G f h (h a)
\end{verbatim}
Giving an initial algebra semantics requires that we interpret 
\verb!G f h! as the carrier of the initial algebra in the category 
of \verb!f!-algebras where the constructor \verb!GCon! is the 
structure map.  That is, we have the following mappings:
\begin{itemize}
    \item \verb!f! maps to a functor $\func{f} : [|\cat{C}|,\cat{C}]
    \mto [|\cat{C}|, \cat{C}]$.

    \item \verb!h! maps to a functor $\func{h} : |\cat{C}| \mto
    |\cat{C}|$. 

    \item \verb!G f h! maps to a functor 
$\func{G}_{\func{f},\func{h}} : |\cat{C}| \mto \cat{C}$.

    \item \verb!GCon! maps to a natural transformation:
          \[
            \mathsf{in} : \func{f}(\func{G}_{\func{f},\func{h}}(-)) \mto \func{G}_{\func{f},\func{h}}(\func{h}(-))
          \]
\end{itemize}
At this point, we can see a problem, we want $(\func{G}_{\func{f},\func{h}},
\mathsf{in})$ to be an initial $\func{f}$-algebra, but
$\mathsf{in}$ has a target that does not fit the proper form, because
it is currently $\func{G}_{\func{f},\func{h}}(\func{h}(-))$, and
does not match the parameter to $\func{f}$ in the source, due to
the application of $\func{h}$.  Thus, in its current form, $\func{in}$
does not match the structure map we need.  Rather, we need it to have
a target of $\func{G}_{\func{f},\func{h}}(-)$.

We can over come this problem using the notion of a left Kan
extension. 
\newcommand{\Lan}[2]{\mathsf{Lan}_{#1}#2}
\begin{definition}[Left Kan Extension]
\label{def:left_kan_extension}
The left Kan extension of a functor $\func{F} : \cat{C} \mto \cat{D}$
along a functor $\func{P} : \cat{C} \mto \cat{C}'$ is, if it exists, a
functor $\Lan{\func{P}}{\func{F}} : \cat{C'} \mto \func{D}$ equipped
with a natural isomorphism:
\[
    \Hom{[\func{C},\func{D}]}{\func{F}}{\func{P}^*} \cong \Hom{[\cat{C}',\cat{D}]}{\Lan{\func{P}}{\func{F}}}{\func{id}}
\]
where $\func{P}^*(\func{H} : \cat{C}' \mto \cat{D}) = \func{P};\func{H}$.
\end{definition}
\noindent
If we can define
$\Lan{\func{h}}{\func{f}(\func{G}_{\func{f},\func{h}}(-))}$ and its
associated natural isomorphism then we can simply apply the latter to
$\mathsf{in}$ to obtain an isomorphic natural transformation that fits
the form of the structure map we need. This is possible using the
notion of a coend.
\begin{definition}[Cowedge]
\label{def:cowedge}
Suppose $\func{F} : \opcat{C} \times \cat{C} \mto \cat{D}$ is a
functor. A \emph{cowedge} $e : \cat{F} \mto w$ is an object $w$ and a
family of maps $e_c : \func{F}(c,c) \mto w$ for each $c$, such that
given any other morphism $f : c' \mto c$, the following holds:
\[
    \func{F}(f,f);e_{c'} = \func{F}(\id_{c'},f);e_{c}
\]
Cowedges are also perserved by composition, that is given a cowedge $e
: F \mto w$ and a map $f : w \mto v$, then $e;f : v \mto F$ is a
cowedge.
\end{definition}

\begin{definition}[Coend]
\label{def:coend}
Suppose $\func{F} : \opcat{C} \times \cat{C} \mto \cat{D}$ is a
functor. A \emph{coend} of $\func{F}$ denoted 
$\exists(c : \cat{C}).\func{F}(c,c)$ 
is a universal cowedge $e : \func{F} \mto w$ where every other cowedge $e' :
w' \mto \func{F}$ factors through $e$ via a unique map $w' \mto w$.
\end{definition}

\begin{definition}[Comma Category]
\label{def:comma_category}
Suppose we have functors $\func{F} : \cat{D} \mto \cat{C}$ and
$\func{G} : \cat{E} \mto \cat{C}$.  Then the arrow category 
$\func{F} \downarrow \func{G}$ consists of:
\begin{itemize}
\item Objects are triples 
      $(d \in \cat{D}, e \in \cat{E}, 
        f : \func{F}d \mto \func{G}e \in \cat{C})$.
\item Morphisms $(d_1,e_1,f_1) \mto (d_2,e_2,f_2)$ are pairs 
      $(h : d_1 \mto d_2,k : e_1 \mto e_2)$ such that the following holds:
      \[
           f_1;\func{G}k = \func{F}h;f_2
      \]
      There is are projection functor:
      \begin{center}
        \begin{math}
            \begin{array}{lll}
                \begin{array}{lll}
                    \func{F} \downarrow \func{G} \mto^{\Pi_{\cat{D}}} \cat{D}\\
                    \Pi(d,e,f) = d\\
                    \Pi(h,k) = h
               \end{array}
               &
               \begin{array}{lll}
                    \func{F} \downarrow \func{G} \mto^{\Pi_{\cat{E}}} \cat{E}\\
                    \Pi(d,e,f) = e\\
                    \Pi(h,k) = k
               \end{array}
            \end{array}
        \end{math}
    \end{center}
\end{itemize}
\end{definition}
\noindent
We can instantiate the above with the functor $\func{h} : |\cat{C}|
\mto |\cat{C}|$ and an object $c \in |\cat{C}|$ to obtain the
category $\func{h} \downarrow c$:
\begin{itemize}
\item Objects are pairs $(b \in |\cat{C}|, \id_{b} : \func{h}(b)
\mto b \in |\cat{C}|)$.

\item Morphisms $(b_1,\id_{b_1}) \mto (b_2,\id_{b_2})$ are morphisms
$f : b_1 \mto b_2 \in |\cat{C}|$, but this implies that $f = \id_{b_1}$.
\end{itemize}
In the objects above we write the identities as $\id_{b} :
\func{h(b)} \mto c$ which can be written as the equation
$\func{h}(b) = c$. Thus, we have a discrete category of all objects $b
\in |\cat{C}|$ such that $\func{h}(b) = c$ which is a full subcategory
of $|\cat{C}|$.

Now if we take the first projection:
\[
    \func{h} \downarrow c \mto^{\Pi_{|\cat{C}|}} |\cat{C}|
\]
we are projecting out the the object $b$ and forgetting the proof
that $h(b) = c$.  Finally, we can compose this with
$\func{f}(\func{G}_{\func{f},\func{h}}(-))$ as follows:
\[
    \func{h} \downarrow c \mto^{\Pi_{|\cat{C}|}} |\cat{C}| \mto^{\func{f}(\func{G}_{\func{f},\func{h}}(-))} \cat{C}
\]
Applying this functor to an object $(b, \func{h}(b) = c)$ yields an
object $\func{f}(\func{G}_{\func{f},\func{h}}(b))$.  Now since we are
dealing with a discrete category we can take the colimit of this
functor to obtain the coproduct we denote as $\coprod_{b \in |\cat{C}|}(h(b) = c,\func{f}(\func{G}_{\func{f},\func{h}}(b)))$.

\noindent
Suppose we have an object $c$.  Then define the functor:
\[
    \begin{array}{lll}
        \func{F} : |\cat{C}|^{\mathsf{op}} \times |\cat{C}| \mto \Set \times \cat{C}\\
        \func{F}(b,b) = \Hom{|\cat{C}|}{c}{h(b)} \times \func{f}(\func{G}_{\func{f},\func{h}}(b))
    \end{array}
\]

\[
\begin{array}{lll}
    \Lan{\func{h}}{\func{f}(\func{G}_{\func{f},\func{h}}(c))} 
    & = \mathsf{colim}(\func{h}\downarrow c \mto^{\Pi^c} |\cat{C}| \mto^{\func{f}(\func{G}_{\func{f},\func{h}}(-))} \cat{C})\\    
    & = \exists(b : |\cat{C}|).\Hom{|\cat{C}|}{c}{h(b))} \times \func{f}(\func{G}_{\func{f},\func{h}}(b))\\    
\end{array}
\]
\[
  \begin{array}{lll}
    \func{f}(\func{G}_{\func{f},\func{h}}(-)) : |\cat{C}|^{\mathsf{op}} \mto \cat{C}\\
    \func{f}(\func{G}_{\func{f},\func{h}}(b)) = \Hom{[|\cat{C}|^{\mathsf{op}},\cat{C}]}{\func{Point}_b}{\func{f}(\func{G}_{\func{f},\func{h}}(-))}
  \end{array}  
\]  
% subsection interpretation (end)
